"use strict";angular.module("relutionClientSecurity",[]);
"use strict";angular.module("relutionClientSecurity").directive("relutionLogOutButton",["$relutionAuthLauncher","$q","LoginService",function(t,n,o){return{template:'<button ng-click="logout();" class="button button-icon icon {{icon}}"></button>',restrict:"AEC",link:function(n){n.icon=t.iconSet.logout,n.logout=function(){return o.secureLogout()}}}}]);
"use strict";angular.module("relutionClientSecurity").factory("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(r){var a,t,n,c,i,d="",h="",o="",A=0;do a=r.charCodeAt(A++),t=r.charCodeAt(A++),h=r.charCodeAt(A++),n=a>>2,c=(3&a)<<4|t>>4,i=(15&t)<<2|h>>6,o=63&h,isNaN(t)?i=o=64:isNaN(h)&&(o=64),d=d+e.charAt(n)+e.charAt(c)+e.charAt(i)+e.charAt(o),a=t=h="",n=c=i=o="";while(A<r.length);return d},decode:function(r){var a,t,n,c,i,d="",h="",o="",A=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(r)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=e.indexOf(r.charAt(A++)),c=e.indexOf(r.charAt(A++)),i=e.indexOf(r.charAt(A++)),o=e.indexOf(r.charAt(A++)),a=n<<2|c>>4,t=(15&c)<<4|i>>2,h=(3&i)<<6|o,d+=String.fromCharCode(a),64!=i&&(d+=String.fromCharCode(t)),64!=o&&(d+=String.fromCharCode(h)),a=t=h="",n=c=i=o="";while(A<r.length);return d}}});
"use strict";angular.module("relutionClientSecurity").provider("$relutionSecurityConfig",function(){var o=this;o.iconSet=null,o.forwardStateAfterLogin=null,o.forwardStateAfterLogout=null,o.loginUrl=null,o.logoutUrl=null,o.icons={android:{login:"ion-log-in",username:"ion-android-person",password:"ion-lock-combination",organization:"ion-briefcase",logout:"ion-log-out"},ios:{login:"ion-log-in",username:"ion-ios-person",password:"ion-lock-combination",organization:"ion-briefcase",logout:"ion-log-out"}},o.formViews={PLACEHOLDER_LABELS:"placeholder_label.html",INLINE_LABELS:"inline_labels.html",STACKED_LABELS:"stacked_label.html",FLOATING_LABELS:"floating_labels.html",INSET_LABELS:"inset_labels.html",INPUT_ICONS:"input_icons.html"},o.setIcons=function(i,n){return o.iconSet=ionic.Platform.isAndroid()?o.icons.android:o.icons.ios,i||n?i&&(o.iconSet=o.icons[i],n)?o.iconSet.assign(n):void 0:o.iconSet},o.setLayoutStyle=function(i){i||o.setLayoutStyle(o.formViews.PLACEHOLDER_LABELS),o.view=o.formViews[i]},o.$get=function(){return o}});
"use strict";angular.module("relutionClientSecurity").service("LoginService",["$q","$state","Base64","$rootScope","$relutionSecurityConfig",function(e,r,o,s,u){var t=this;this.userResponse=null,this.isLoggedIn=!1,this.basicAuth=null,this.form={username:{value:s.globals?s.globals.username:null,type:"text",required:!0},password:{value:null,type:"password",required:!0}},this.setUsername=function(e){t.form.username.value=e},this.setPassword=function(e){t.form.password.value=e},this.clearCredentials=function(){jQuery.ajaxSetup({headers:{Authorization:"Basic "}})},this.logon=function(){return t.basicAuth=o.encode(t.form.username.value+":"+t.form.password.value),jQuery.ajaxSetup({xhrFields:{withCredentials:!0}}),t.secureLogin()},this.success=function(e){return t.userResponse=e,r.go(u.forwardStateAfterLogin)},this.error=function(e){return console.error("Login failed",e)},this.successLogout=function(){return t.user=null,console.log("logged out"),r.go(u.forwardStateAfterLogout)},this.errorLogout=function(e){return console.error("Logout failed",e)},this.secureLogin=function(){if(!u.loginUrl)return console.error("please configure your loginUrl, $relutionSecurityConfig.loginUrl = secureloginUrl"),e.when(!1);var r={userName:t.form.username.value,password:t.form.password.value};return jQuery.ajax({type:"POST",headers:{"Content-Type":"application/json"},url:u.loginUrl,data:JSON.stringify(r),success:t.success,error:t.error,dataType:"json"})},this.secureLogout=function(){return u.logoutUrl?jQuery.post(u.logoutUrl,t.successLogout):(console.error("please configure your logoutUrl, $relutionSecurityConfig.logoutUrl = secureloginUrl"),e.when(!1))}}]);
angular.module("relutionClientSecurity").run(["$templateCache",function(n){n.put("floating_labels.html",'<form class="login-list" name="loginform" ng-submit="loginC.submit(loginform)" novalidate>\n  <div class="list">\n    <label class="item item-input item-floating-label">\n      <span class="input-label">{{\'Username\'|translate}}</span>\n      <input type="text" placeholder="{{\'Username\'|translate}}" name="username"\n             ng-model="loginC.service.form.username.value"\n             required>\n    </label>\n    <label class="item item-input item-floating-label">\n      <span class="input-label">{{\'Password\'|translate}}</span>\n      <input type="password" name="password" placeholder="{{\'Password\'|translate}}"\n             ng-model="loginC.service.form.password.value" required>\n    </label>\n  </div>\n  <div class="padding">\n    <button class="button button-block button-dark" ng-disabled="loginForm.$invalid">{{\'LOGIN\'|translate}}</button>\n  </div>\n</form>\n'),n.put("inline_labels.html",'<form class="login-list" name="loginform" ng-submit="loginC.submit(loginform)" novalidate>\n  <div class="list">\n    <label class="item item-input ">\n      <span class="input-label">{{\'Username\'|translate}}</span>\n      <input type="text" name="username" ng-model="loginC.service.form.username.value" required>\n    </label>\n    <label class="item item-input ">\n      <span class="input-label">{{\'Password\'|translate}}</span>\n      <input type="password" name="password" ng-model="loginC.service.form.password.value" required>\n    </label>\n  </div>\n  <div class="padding">\n    <button class="button button-block button-dark" ng-disabled="loginForm.$invalid">{{\'LOGIN\'|translate}}</button>\n  </div>\n</form>\n'),n.put("input_icons.html",'<form class="login-list" name="loginform" ng-submit="loginC.submit(loginform)" novalidate>\n  <div class="list">\n    <label class="item item-input ">\n      <i class="icon {{loginC.icons.username}}"></i>\n      <input type="text" name="username" ng-model="loginC.service.form.username.value" placeholder="{{\'Username\'|translate}}" required>\n    </label>\n    <label class="item item-input ">\n      <i class="icon {{loginC.icons.password}}"></i>\n      <input type="password" name="password" ng-model="loginC.service.form.password.value" placeholder="{{\'Password\'|translate}}" required>\n    </label>\n  </div>\n  <div class="padding">\n    <button class="button button-block icon-left button-dark button-icon icon {{loginC.icons.login}}" ng-disabled="loginForm.$invalid">{{\'LOGIN\'|translate}}</button>\n  </div>\n</form>\n'),n.put("inset_labels.html",'<form class="login-list" name="loginform" ng-submit="loginC.submit(loginform)"\n      novalidate>\n  <div class="list list-inset">\n    <label class="item item-input ">\n      <span class="input-label ">{{\'Username\'|translate}}</span>\n      <input  type="text" name="username" ng-model="loginC.service.form.username.value"\n             required>\n    </label>\n    <label class="item item-input ">\n      <span class="input-label ">{{\'Password\'|translate}}</span>\n      <input  type="password" name="password"\n             ng-model="loginC.service.form.password.value" required>\n    </label>\n  </div>\n  <div class="padding">\n    <button class="button button-block button-dark" ng-disabled="loginForm.$invalid">{{\'LOGIN\'|translate}}</button>\n  </div>\n</form>\n'),n.put("placeholder_label.html",'<form  class="login-list" name="loginform" ng-submit="loginC.submit(loginform)"\n      novalidate>\n  <div class="list">\n    <label class="item item-input ">\n      <input class="royal" type="text" placeholder="{{\'Username\'|translate}}" name="username" ng-model="loginC.service.form.username.value"\n             required>\n    </label>\n    <label class="item item-input ">\n      <input class="royal" type="password" name="password" placeholder="{{\'Password\'|translate}}"\n             ng-model="loginC.service.form.password.value" required>\n    </label>\n    <button class="button button-dark button-block" ng-disabled="loginForm.$invalid">\n      {{\'LOGIN\'|translate}}\n    </button>\n  </div>\n</form>\n\n'),n.put("stacked_label.html",'<form  class="login-list" name="loginform" ng-submit="loginC.submit(loginform)"\n      novalidate>\n  <div class="list">\n    <label class="item item-input item-stacked-label">\n      <span class="input-label balanced">Username</span>\n      <input class="royal" type="text" placeholder="John" name="username" ng-model="loginC.service.form.username.value"\n             required>\n    </label>\n    <label class="item item-input item-stacked-label">\n      <span class="input-label balanced">Password</span>\n      <input class="royal" type="password" name="password" placeholder="Password"\n             ng-model="loginC.service.form.password.value" required>\n    </label>\n    <button class="button button-dark button-block" ng-disabled="loginForm.$invalid">\n      {{\'LOGIN\'|translate}}\n    </button>\n  </div>\n</form>\n')}]);
//# sourceMappingURL=relution-client-security.min.js.map