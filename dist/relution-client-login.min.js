"use strict";angular.module("relutionAuth",[]);
"use strict";angular.module("relutionAuth").directive("relutionLogOutButton",["$relutionAuthLauncher","$q","LoginService",function(t,o,n){return{template:'<button ng-click="logout();" class="button button-icon icon {{icon}}"></button>',restrict:"AEC",link:function(o){o.icon=t.iconSet.logout,o.logout=function(){return n.secureLogout()}}}}]);
"use strict";angular.module("relutionAuth").factory("Base64",function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var a,t,n,c,i,h="",d="",o="",A=0;do a=e.charCodeAt(A++),t=e.charCodeAt(A++),d=e.charCodeAt(A++),n=a>>2,c=(3&a)<<4|t>>4,i=(15&t)<<2|d>>6,o=63&d,isNaN(t)?i=o=64:isNaN(d)&&(o=64),h=h+r.charAt(n)+r.charAt(c)+r.charAt(i)+r.charAt(o),a=t=d="",n=c=i=o="";while(A<e.length);return h},decode:function(e){var a,t,n,c,i,h="",d="",o="",A=0,u=/[^A-Za-z0-9\+\/\=]/g;u.exec(e)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=r.indexOf(e.charAt(A++)),c=r.indexOf(e.charAt(A++)),i=r.indexOf(e.charAt(A++)),o=r.indexOf(e.charAt(A++)),a=n<<2|c>>4,t=(15&c)<<4|i>>2,d=(3&i)<<6|o,h+=String.fromCharCode(a),64!=i&&(h+=String.fromCharCode(t)),64!=o&&(h+=String.fromCharCode(d)),a=t=d="",n=c=i=o="";while(A<e.length);return h}}});
"use strict";angular.module("relutionAuth").provider("$relutionAuthLauncher",function(){var o=this;o.iconSet=null,o.forwardStateAfterLogin=null,o.forwardStateAfterLogout=null,o.loginUrl=null,o.logoutUrl=null,o.icons={android:{login:"ion-log-in",username:"ion-android-person",password:"ion-lock-combination",organization:"ion-briefcase",logout:"ion-log-out"},ios:{login:"ion-log-in",username:"ion-ios-person",password:"ion-lock-combination",organization:"ion-briefcase",logout:"ion-log-out"}},o.setIcons=function(n,i){return o.iconSet=ionic.Platform.isAndroid()?o.icons.android:o.icons.ios,n||i?n&&(o.iconSet=o.icons[n],i)?o.iconSet.assign(i):void 0:o.iconSet},o.formViews={PLACEHOLDER_LABELS:"placeholder_label.html",INLINE_LABELS:"inline_labels.html",STACKED_LABELS:"stacked_label.html",FLOATING_LABELS:"floating_labels.html",INSET_LABELS:"inset_labels.html",INPUT_ICONS:"input_icons.html"},o.setLayoutStyle=function(n){n||o.setLayoutStyle(o.formViews.PLACEHOLDER_LABELS),o.view=o.formViews[n]},o.$get=function(){return o}});
"use strict";angular.module("relutionAuth").service("LoginService",["$q","$state","Base64","$rootScope","$relutionAuthLauncher",function(e,r,o,s,u){var t=this;this.userResponse=null,this.isLoggedIn=!1,this.basicAuth=null,this.form={username:{value:s.globals?s.globals.username:null,type:"text",required:!0},password:{value:null,type:"password",required:!0}},this.setUsername=function(e){t.form.username.value=e},this.setPassword=function(e){t.form.password.value=e},this.clearCredentials=function(){jQuery.ajaxSetup({headers:{Authorization:"Basic "}})},this.logon=function(){return t.basicAuth=o.encode(t.form.username.value+":"+t.form.password.value),jQuery.ajaxSetup({xhrFields:{withCredentials:!0}}),t.secureLogin()},this.success=function(e){return t.userResponse=e,r.go(u.forwardStateAfterLogin)},this.error=function(e){return console.error("Login failed",e)},this.successLogout=function(){return t.user=null,console.log("logged out"),r.go(u.forwardStateAfterLogout)},this.errorLogout=function(e){return console.error("Logout failed",e)},this.secureLogin=function(){if(!u.loginUrl)return console.error("please configure your loginUrl, $relutionAuthLauncher.loginUrl = secureloginUrl"),e.when(!1);var r={userName:t.form.username.value,password:t.form.password.value};return jQuery.ajax({type:"POST",headers:{"Content-Type":"application/json"},url:u.loginUrl,data:JSON.stringify(r),success:t.success,error:t.error,dataType:"json"})},this.secureLogout=function(){return u.logoutUrl?jQuery.post(u.logoutUrl,t.successLogout):(console.error("please configure your logoutUrl, $relutionAuthLauncher.logoutUrl = secureloginUrl"),e.when(!1))}}]);
//# sourceMappingURL=relution-client-login.min.js.map